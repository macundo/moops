# set(fluid_solvers math/backward_euler forward_euler explicit_sdc semi_implicit_sdc)
set(math_tests Ode Linear NonLinear)
set(fluid_solvers cpu_stokes_solver fmm_stokes_solver)
set(linear_solvers generalized_minimal_residual_method)
set(nonlinear_solvers inexact_newton)
set(ode_solvers backward_euler forward_euler explicit_sdc semi_implicit_sdc)

set(FileList "")
foreach(test ${fluid_solvers})
    set(FileList ${FileList} ${test}.cpp)
endforeach(test)
CREATE_TEST_SOURCELIST(FluidSolverTests FluidSolverTest.cpp ${FileList})
message(${FluidSolverTests})
ADD_EXECUTABLE(TestFluidSolver ${FluidSolverTests})
SET(FluidSolverTestsToRun ${FluidSolverTests})
LIST(REMOVE_ITEM FluidSolverTestsToRun FluidSolverTest.cpp)
FOREACH(test ${FluidSolverTestsToRun})
    GET_FILENAME_COMPONENT(TName ${test} NAME_WE)
    ADD_TEST(${TName} ${CXX_TEST_PATH}/TestFluidSolver ${TName})
ENDFOREACH (test)

set(FileList "")
foreach(test ${ode_solvers})
    set(FileList ${FileList} ${test}.cpp)
endforeach(test)
CREATE_TEST_SOURCELIST(OdeSolverTests OdeSolverTest.cpp ${FileList})
ADD_EXECUTABLE(TestOdeSolver ${OdeSolverTests})
SET(OdeSolverTestsToRun ${OdeSolverTests})
LIST(REMOVE_ITEM OdeSolverTestsToRun OdeSolverTest.cpp)
FOREACH(test ${OdeSolverTestsToRun})
    GET_FILENAME_COMPONENT(TName ${test} NAME_WE)
    ADD_TEST(${TName} ${CXX_TEST_PATH}/OdeSolverTest ${TName})
ENDFOREACH (test)

set(FileList "")
foreach(test ${linear_solvers})
    set(FileList ${FileList} ${test}.cpp)
endforeach(test)
CREATE_TEST_SOURCELIST(LinearSolverTests LinearSolverTest.cpp ${FileList})
ADD_EXECUTABLE(TestLinearSolver ${LinearSolverTests})
SET(LinearSolverTestsToRun ${LinearSolverTests})
LIST(REMOVE_ITEM LinearSolverTestsToRun LinearSolverTest.cpp)
FOREACH(test ${LinearSolverTestsToRun})
    GET_FILENAME_COMPONENT(TName ${test} NAME_WE)
    ADD_TEST(${TName} ${CXX_TEST_PATH}/LinearSolverTest ${TName})
ENDFOREACH (test)

set(FileList "")
foreach(test ${nonlinear_solvers})
    set(FileList ${FileList} ${test}.cpp)
endforeach(test)
CREATE_TEST_SOURCELIST(NonLinearSolverTests NonLinearSolverTest.cpp ${FileList})
ADD_EXECUTABLE(TestNonLinearSolver ${NonLinearSolverTests})
SET(NonLinearSolverTestsToRun ${NonLinearSolverTests})
LIST(REMOVE_ITEM NonLinearSolverTestsToRun NonLinearSolverTest.cpp)
FOREACH(test ${NonLinearSolverTestsToRun})
    GET_FILENAME_COMPONENT(TName ${test} NAME_WE)
    ADD_TEST(${TName} ${CXX_TEST_PATH}/NonLinearSolverTest ${TName})
ENDFOREACH (test)
